<footer class="footer">
    <div class="content-holder footer-content">
        <div class="footer-content-top">
            <div class="footer-content-top-contact">
                <div class="footer-content-top-contact-branding">
                    <img class="footer-content-top-contact-branding-logo" src="icons/header/profitproton-main-logo-300ppi.png" alt="ProfitProton logo">
                    <div class="footer-content-top-contact-branding-name">ProfitProton</div>
                </div>
                <div class="footer-content-top-contact-email">support@profitproton.com</div>
            </div>
            <div class="footer-content-top-quicklinks">
                <div class="footer-content-top-quicklinks-list">
                    <div class="footer-content-top-quicklinks-list-item"><span>Home</span></div>
                    <div class="footer-content-top-quicklinks-list-item"><span>Articles</span></div>
                    <div class="footer-content-top-quicklinks-list-item"><span>Recommended Platforms</span></div>
                    <div class="footer-content-top-quicklinks-list-item"><span>About</span></div>
                    <div class="footer-content-top-quicklinks-list-item"><span>Affiliates</span></div>
                </div>
            </div>
            <div class="footer-content-top-social">
                <div class="footer-content-top-social-follow">
                    Follow us!
                </div>
                <div class="footer-content-top-social-list">
                    <div class="footer-content-top-social-list-item"><a href="https://www.instagram.com/profitproton/" target="_blank"><img class="footer-content-top-social-list-item" src="icons/socials/instagram.png" alt="Instagram logo"></a></div>
                    <div class="footer-content-top-social-list-item"><a href="https://www.twitter.com/profitproton/" target="_blank"><img class="footer-content-top-social-list-item" src="icons/socials/twitter.png" alt="Twitter icon"></a></div>
                    <div class="footer-content-top-social-list-item"><a href="https://www.profitproton.com/" target="_blank"><img class="footer-content-top-social-list-item" src="icons/socials/link.png" alt="Website link icon"></a></div>
                </div>
            </div>
        </div>
        <div class="footer-content-disclaimer">
            Disclaimer: The information provided on this website is for general purposes only and should not replace professional financial advice. Consult a qualified advisor for personalized guidance.
        </div>
        <div class="footer-content-bottom">
            &#169; 2023, ProfitProton. All rights reserved
        </div>
    </div>
</footer>

<script src="scripts/main.js"></script>

<script>
    updateCache();

    function updateCache() {

        console.log("Update Cache");
        // Fetch the latest commit hash or last modified timestamp from the GitHub API
        fetch('https://api.github.com/repos/PolycatGames/ProfitProton/commits')
            .then(response => response.json())
            .then(data => {
                const latestCommitHash = data[0].sha;

                // Create a promise for each CSS file
                const cssPromises = Array.from(document.querySelectorAll('link[rel="stylesheet"]')).map(cssFile => {
                    return new Promise((resolve, reject) => {
                        cssFile.onload = resolve;
                        cssFile.onerror = reject;
                    });
                });

                // Create a promise for each JavaScript file
                const jsPromises = Array.from(document.querySelectorAll('script[src]')).map(jsFile => {
                    return new Promise((resolve, reject) => {
                        jsFile.onload = resolve;
                        jsFile.onerror = reject;
                    });
                });

                // Wait for all CSS and JavaScript files to be loaded
                Promise.all([...cssPromises, ...jsPromises])
                    .then(() => {
                        // Update CSS file URLs after all CSS files are loaded
                        const cssFiles = document.querySelectorAll('link[rel="stylesheet"]');
                        cssFiles.forEach(cssFile => {
                            const originalHref = cssFile.href;
                            const updatedHref = originalHref + '?v=' + latestCommitHash;
                            cssFile.href = updatedHref;
                        });

                        // Update JavaScript file URLs after all JavaScript files are loaded
                        const jsFiles = document.querySelectorAll('script[src]');
                        jsFiles.forEach(jsFile => {
                            const originalSrc = jsFile.src;
                            const updatedSrc = originalSrc + '?v=' + latestCommitHash;
                            jsFile.src = updatedSrc;
                        });

                        // Update image file URLs
                        const imgFiles = document.querySelectorAll('img[src]');
                        imgFiles.forEach(imgFile => {
                            const originalSrc = imgFile.src;
                            const updatedSrc = originalSrc + '?v=' + latestCommitHash;
                            imgFile.src = updatedSrc;
                        });

                        // Display the current version number in the browser console
                        console.log('Current version number:', latestCommitHash);
                    })
                    .catch(error => {
                        console.error('Error loading files:', error);
                    });
            })
            .catch(error => {
                console.error('Error fetching commit data:', error);
            });
    };
</script>